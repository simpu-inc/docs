---
title: ''
description: ' Everything you need to know on how to monitor events when specific actions take place in your integration.'
---
## Why use webhook
When building Simpu integrations, you might want your applications to receive events as they occur, so that your backend systems can execute actions accordingly.

To enable webhook events, you need to register webhook endpoints. After registering them, Simpu can push real-time event data to your application's webhook endpoint when specific events occur. Simpu uses HTTPS to send webhook events to your app as a JSON payload, which includes detailed information about the event.
Receiving webhook events is particularly useful for tracking actions.

## Event Overview
Simpu generates event data that can be sent to you to inform you of activities in your account.

When an event occurs, Simpu creates a new Event object. A single action might trigger multiple events.

By registering webhook endpoints in your Simpu account, you allow Simpu to automatically send Event objects via POST requests to your application's registered webhook endpoint. Once your webhook endpoint receives the Event, your app can execute backend actions.

Webhooks allows you to listen to real-time events happening across your Simpu workspace. With webhooks, you can build custom integrations with simpu.


## Verifying Events
It’s crucial to verify events that originates from Simpu to ensure that no value is delivered based on a counterfeit event.

For security purposes, valid events are sent with a header, **x-simpu-webhook-signature**. This signature is an **HMAC SHA512** hash of the event payload, signed using your **webhook_hash_key**.

The **webhook_hash_key** itself is generated by applying **SHA256** to your **API token**. This ensures that each event is securely authenticated, and you can verify the source before processing the event.

By verifying the signature using the webhook_hash_key, you can confidently ensure the integrity of the events received by your application.

<CodeGroup>

```javascript Javascript
var crypto = require('crypto');
var secret = process.env.SECRET_KEY;
var webhookHashKey = crypto.createHash("sha256").update(secret).digest("hex");
// Using Express
app.post("/my/webhook/url", function(req, res) {
    //validate event
    var hash = crypto.createHmac('sha512', webhookHashKey).update(JSON.stringify(req.body)).digest('hex');
    if (hash === req.headers['x-lenco-signature']) {
        // Retrieve the request's body
        var event = req.body;
        // Do something with event
    }
    res.send(200);
    });
```
```python Python
import hmac
import hashlib
import os
from flask import Flask, request, jsonify

app = Flask(__name__)

# Secret key
secret = os.getenv('SECRET_KEY')
webhook_hash_key = hashlib.sha256(secret.encode()).hexdigest()

@app.route('/my/webhook/url', methods=['POST'])
def webhook():
    # Validate event
    req_body = request.get_data(as_text=True)
    computed_hash = hmac.new(webhook_hash_key.encode(), req_body.encode(), hashlib.sha512).hexdigest()

    if computed_hash == request.headers.get('x-lenco-signature'):
        # Retrieve the request's body (assuming it's JSON)
        event = request.get_json()
        # Do something with event
        return jsonify({'status': 'success'}), 200
    else:
        return jsonify({'error': 'Invalid signature'}), 400

if __name__ == '__main__':
    app.run(debug=True)

```
```php PHP
    <?php
// only a post with lenco signature header gets our attention
if ((strtoupper($_SERVER['REQUEST_METHOD']) != 'POST' ) || !array_key_exists('HTTP_X_LENCO_SIGNATURE', $_SERVER) )
    exit();
// Retrieve the request's body
$input = @file_get_contents("php://input");
define('LENCO_SECRET_KEY','SECRET_KEY');
$webhook_hash_key = hash("sha256", LENCO_SECRET_KEY);
// validate event do all at once to avoid timing attack
if($_SERVER['HTTP_X_LENCO_SIGNATURE'] !== hash_hmac('sha512', $input, $webhook_hash_key))
    exit();
http_response_code(200);
// parse event (which is json string) as object
// Do something - that will not take long - with $event
$event = json_decode($input);
exit();
?>
    ```
    </CodeGroup>



## Responding to an event
To handle Simpu webhooks, your application should respond with a `200 OK` status to acknowledge the receipt of the event. If the response is anything other than `200`, `201`, or `202`, the event will be considered unacknowledged, and Simpu will retry sending it every hour for up to 24 hours. Only the status code is required—any other parameters or request bodies will be ignored.

If your application needs to execute long-running tasks after receiving an event, it should still respond with a `200 OK` immediately, before proceeding with the task, to avoid duplicate events being triggered.


## Types of events
Here are the events we currently support. More will be added to this list as we integrate additional actions in the future.
| Event                             | Description                                                                 |
|:-----------------------------------|:-----------------------------------------------------------------------------|
| `airtime.success`                 | Airtime transaction was successfully completed                              |
| `airtime.failed`                  | Airtime transaction attempted failed                                        |
| `airtime.duplicate`               | If you attempt to send the same airtime amount to the same recipient at the same interval         |
| `airtime.error`                   | Unknown error                                                                |
| `text.delivered`                  | The SMS message was successfully delivered                                   |
| `text.undelivered`                | The SMS message failed to deliver                                            |
| `text.clicked`                    | The link in the SMS was clicked                                              |
| `email.delivered`                 | The email was successfully delivered to the recipient                        |
| `email.bounced`                   | The email failed to deliver                                                  |
| `email.opened`                    | The recipient opened the email                                               |
| `email.clicked`                   | The recipient clicked a link in the email                                    |



## Example
```json
{
  "data": {
    "object": {
      "callback": "https://webhook.site/70652a3f-c84f-4efe-a63d-f272e66abc29",
      "amount": "12.0",
      "object": "airtime",
      "organisation_id": "897436867c0911eb8e5d9a88eb4ca9b7",
      "created_datetime": "2024-09-23T20:19:59.873639",
      "network": "GLO",
      "recipient": "2349055019322",
      "status": "success"
    }
  },
  "id": "evt.airtime_ExTefBPVsc1F901NXSNm1EZnvzpfOTcQ",
  "object": "event",
  "type": "AIRTIME_SUCCESS",
  "timestamp": "Sep 23, 2024, 8:20:01 PM"
}
```

